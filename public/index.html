<html>

<head>
	<title>Quiz Game</title>
	<link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
	<link href="stylesheets/style.css" rel="stylesheet">
	<script src="javascripts/loginPage.js" defer></script>
	<script src="javascripts/QuestionSet.js"></script>
	<script src="javascripts/gamePage.js" defer></script>
</head>

<body>
	<div id="login-div">
		<h1> Welcome to Quiz Game </h1>
		<form id="form-nickname">
			<label> Enter a nickname for playing, please! </label><br>
			<input id='nickname' type='text' name='nickname' required><br>
			<input id="submit-nickname" type="submit" value="Submit">
		</form>

		<div id='play-type'>
			<p id='username'></p>
			<input type='button' id='single' value='Single-player Game' onclick="singlePlayer();">
			<input type='button' id='mulitple' value='Multi-player Game' onclick="multiPlayer();">
		</div>
	</div>

	<div id='players-div'>
		<p id=player></p>
		<ul id=players_list></ul>
	</div>

	<div id="game-div">
		<div id="timer" style="float: right;"></div><br>
		<form id="form-quiz" name="form-quiz">
			<div id="quizPage">
				<p id="p_question"></p>
				<div id="div_option1">
					<input id="inp_option1" name="option" type="radio">
				</div>

				<div id="div_option2">
					<input id="inp_option2" name="option" type="radio">
				</div>

				<div id="div_option3">
					<input id="inp_option3" name="option" type="radio">
				</div>
				<br>

				<input type='button' id="btn_answer" value="Answer" onclick="answerQuestion();" disabled>

				<div id="div_status">
					<p id="p_status"></p>
					<input type='button' id="btn_next" value="Next Question" onclick="printQuestion();">
				</div>
			</div>
		</form>

		<div id="finish-game">
			<p id="message"></p>
			<p id="number_correct">You finished good job!</p>
			<img id="img"></img>
		</div>
	</div>

	<script>
		window.addEventListener('beforeclose', (e) => {
			fetch('/deletePlayer?nickname=' + nickname, {
				method: 'DELETE'
			});	
		});
		/* async function onbeforeunload() {
			var request = await fetch('/deletePlayer?nickname=' + nickname, {
				method: 'DELETE'
			});
		} */
	</script>

</body>

</html>